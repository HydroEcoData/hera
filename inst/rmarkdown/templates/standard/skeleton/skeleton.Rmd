---
title: "Assessment Template"
output: rmarkdown::html_vignette
editor_options: 
  chunk_output_type: console
vignette: >
  %\VignetteIndexEntry{Assessment Template}
  %\VignetteEncoding{UTF-8}  
  %\VignetteEngine{knitr::rmarkdown}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = F
)
library(hera)
library(dplyr)
library(purrr)
library(tidyr)
library(tibble)
library(magrittr)
library(testthat)
library(visNetwork)
```

## Welcome

This document has been created following the generic [assessment
guidance](https://ecodata1.github.io/hera/articles/development_guide.html).

<!-- Create a new regulatory assessment by updating the code info below, for guidance see https://ecodata1.github.io/hera/articles/development_guide.html  -->

## Description

```{r setup}

description <- tribble(
  ~question, ~response,
  "name_short", "TDI",
  "name_long", "Example",
  "parameter", "River Diatoms",
  "status", "prototype"
)

description
```

## Input

```{r data}

input <- tribble(
  ~sample_id,
  ~question,
  ~response,
  ~label,
  ~parameter,
  ~type,
  ~max,
  ~min,
  ~source,
  "12345",
  "Taxon abundance",
  "12",
  "Gomphonema olivaceum",
  "River Diatoms",
  "number",
  NA,
  NA,
  "sepa_ecology_results"
)
input
```

## Assessment

If applicable, write a function to assess your input data and return an output. For example, a metric, statistic, prediction etc

```{r assessment}

assessment_function <- function(data) {
  # Some calculated a statistic...
  # Note, any non-standard base R library must be call using require().
  # require(dplyr)
  # require(tidyr)
  # require(magrittr)
  # require(tibble)
  # data <- data %>%
  #   group_by(sample_id) %>% 
  #   summarise(question = "n_count",
  #             response = n(),
  #             sample_id = unique(sample_id)
  #             )
  
  return(data)
}
```

## Output

```{r output}
output <- assessment_function(input)
output
```

## Check

Run checks on the assessment:

```{r checklist}
# No need to edit this code
# Format description
standard_format <- hera:::hera_format(description = description) 
# Check description
check_list <- hera:::hera_test(description = description)
knitr::kable(check_list$standard_check)
```

## Update

```{r hera_update}
# No need to edit this code
hera:::update_catalogue(
  description = description,
  input = input,
  assessment_function = assessment_function,
  output = output
)
```

## Hera

This section tests if this assessment is usable using `hera` function

```{r}
# hera(hera::demo_data)
# assessment(data = hera::demo_data, name = "Example")
```

## Launch app

Below is an interactive application displaying the results of your assessment.

```{r launch_app, echo=FALSE, eval=FALSE}
# No need to edit this code
# launch_app(new_catalogue = catalogue, data = data)
```
